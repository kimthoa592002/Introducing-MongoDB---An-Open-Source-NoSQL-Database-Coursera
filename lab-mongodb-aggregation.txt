Lab MongoDB Aggregation - Coursera Cloud IDE

Environment:
- Platform: Coursera / Cognitive Class
- Tool: Cloud IDE (browser-based)
- Database: MongoDB
- Access: MongoDB CLI (mongosh)

--------------------------------------------------

# 1. Insert sample data into the marks collection (training database)
use training 
db.marks.insert({"name":"Ramesh","subject":"maths","marks":87}) 
db.marks.insert({"name":"Ramesh","subject":"english","marks":59}) 
db.marks.insert({"name":"Ramesh","subject":"science","marks":77}) 
db.marks.insert({"name":"Rav","subject":"maths","marks":62}) 
db.marks.insert({"name":"Rav","subject":"english","marks":83}) 
db.marks.insert({"name":"Rav","subject":"science","marks":71}) 
db.marks.insert({"name":"Alison","subject":"maths","marks":84}) 
db.marks.insert({"name":"Alison","subject":"english","marks":82}) 
db.marks.insert({"name":"Alison","subject":"science","marks":86}) 
db.marks.insert({"name":"Steve","subject":"maths","marks":81}) 
db.marks.insert({"name":"Steve","subject":"english","marks":89}) 
db.marks.insert({"name":"Steve","subject":"science","marks":77}) 
db.marks.insert({"name":"Jan","subject":"english","marks":0,"reason":"absent"}) 

# 2. Limit the number of rows in the output.
db.marks.aggregate([{"$litmit:2}])

# 3. Sort based on a column
db.marks.aggregate([{"$sort":{"marks":1}}])
db.marks.aggregate([{"$sort":{"marks":-1}}])

# 4. Sort and limit
db.marks.aggregate([
{"$sort":{"marks":1},
{"$limit":2}
])

# 5. Use group by to calculate the average 
db.marks.aggregate([
{
  "$group":{"_id":"$subject, 
            "average":{"$avg":"$marks"}
            }
}
])
